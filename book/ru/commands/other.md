# Создание файлов

Для того, чтобы продемонстрировать работу команд, нам понадобится создать несколько вспомогательных файлов. 

![other](../img/commands/other/1.png)

На первой строчке мы переходим в директорию рабочего стола, на второй – создаем папку «smth», далее заходим в нее так же как в самом начале, создаем текстовый файл **«myfile.txt»** и редактируем его с помощью команды nano.

## Команда date

Команда **date** позволяет оперировать датой и временем. 

**Вывести дату и время.**

``` 
~$ date
```
![other](../img/commands/other/2.png)

### Ключи date
---

<ins>**Ключ –u**</ins>

**Вывести всеобщее скоординированное время.** 

```
~$ date -u
```

![other](../img/commands/other/3.png)

<ins>**Ключ –d**</ins> 

**Узнать дату указанного дня.**

```
~$ date –d String 
```

**Вместо String надо указать день в строчном формате.**

![other](../img/commands/other/4.png)


<ins>**Ключ –r**</ins> 

**Узнать дату и время последней редакции указанного файла.** 

```
~$ date –r filename
```

![other](../img/commands/other/5.png)


<ins>**Ключ –iso-8601**</ins>

**Вывести дату и время в формате ISO 8601**

```
~$ date --iso-8601=seconds
```

![other](../img/commands/other/6.png)

<ins>**Ключ –rfc-3339**</ins>

**Вывести дату и время в формате RFC 3339**

```
~$ date –rfc-3339=seconds
```

![other](../img/commands/other/7.png)


<ins>**Форматирование даты**</ins>

**Вывести дату в заданном формате**

```
~$ date +%Y-%m-%d_%H:%M:%S
```

Постоянными в строчке кода остаются **«+»** в начале, **«%»** перед первыми буквами слов **year** (год) , **month** (месяц), **day** (день), **hours** (часы), **minutes** (минуты) и **seconds** (секунды) соответственно. Если написать **Y** – то машина выведет год в формате **ХХХХ**, а если с малого регистра, то в формате **XX**. Пользователь сам может выбрать из чего ему складывать дату или время, а может, все вместе, а так же то, как будут разделяться элементы.

![other](../img/commands/other/8.png)

## Команда history

Вывести весь список введенных ранее команд. 
 
```
~$ history
```

![other](../img/commands/other/9.png)

Количество выводимых команд контролируется параметром **HISTSIZE**. По умолчанию он установлен на **1000**, но можно изменить введя

```
~$ export HISTSIZE=10 
```

![other](../img/commands/other/10.png)

### Ключи history

<ins>**Ключ n**</ins>

Вывести определенное количество введенных ранее команд

```
~$ history 2 
```

вместо цифры 2 может быть записано любое число, зависимое от того, сколько команд потребуется вывести на экран.

![other](../img/commands/other/11.png)

<ins>**Ключ –с**</ins>

Отчистить историю.

```
~$ history -c
```

![other](../img/commands/other/12.png)

<ins>**Ключ –d n**</ins>

Удалить определенную строку в истории
На скриншоте ниже мы удаляем строку «blabla» с номером 80, поэтому вводим следующий код.

```
~$ history –d 80
```

Пример:

![other](../img/commands/other/13.png)

Результат:

![other](../img/commands/other/14.png)


<ins>**Ключ –r filename**</ins>
  
В историю вписать содержимое выбранного файла

```
~$ history –r myfile  
```

Содержимое файла **«myfile.txt»** было рассмотрено в примере работы команды **date** с таким же ключом. Но мы напомним о нем с помощью команды **cat**.

![other](../img/commands/other/15.png)


## Команда which 
 
**Сообщить пользователю, была ли найдена указанная программа в каталогах, перечисленных в переменной среды _PATH_**.

Когда операционная система запускает какую-нибудь программу, она стартует новый процесс и каким-то образом передаёт ему информацию о настройках среды, или окружения. Эта информация состоит из набора переменных, содержащих некоторые значения. Процесс может получить эти значения, обратившись к нужной переменной по имени.

При помощи переменных окружения можно передавать информацию не только запускаемым процессам, но и самой операционной системе. Она тоже читает и использует значения переменных окружения, поэтому можно управлять некоторыми аспектами поведения операционной системы, изменяя переменные окружения.

Переменная **PATH** содержит список директорий, в которых операционная система пытается искать исполняемые файлы, если пользователь при запуске не указал явно путь к нужному исполняемому файлу.
  
```
~$ which filename
```

![other](../img/commands/other/16.png)

## Команда tmux

**tmux** — это менеджер терминалов, к которому удобно подключаться и отключаться, не теряя при этом процессы и историю.

**Перейти в менеджер терминалов**

```
~$ tmux
``` 

![other](../img/commands/other/17.png)

Открытые страницы в tmux отображаются снизу.

![other](../img/commands/other/18.png)

Важная особенность **tmux** заключается в том, что если запустить его на сервере, то он будет помнить историю запусков процессов и они продолжат выполнение даже если соединение с сервером будет потеряно. Кроме того, при новом соединении с сервером можно будет подключиться к уже запущенному tmux и продолжить работу с момента потери связи.

Настройки для **tmux** хранятся в файле **«.tmux.conf»** в домашней директории пользователя.

Команды которые можно совершать с мультиплексором:

* **Ctrl+b ”** – разделить окно по горизонтали
* **Ctrl+b %** – разделить окно по вертикали
* **Ctrl+b стрелка** – переключиться на панель
* **зажать Ctrl+b и стрелки** – изменить размер панели
* **Ctrl+b c** – открыть новое окно
* **Ctrl+b n** – переключиться на следующее окно
* **Ctrl+b p** -переключиться на предыдущее окно
* **Ctrl+b N** – переключиться на окно номер N
* **Ctrl+b t** – цифровые часы
* **Ctrl+b ?** – список команд
* **Ctrl+b :** - командная строка
* **Ctrl+b q** – отобразить номера панелей
* **Ctrl+b x** – убить панель

**Посмотреть все открытые вкладки и создать дополнительную, в которой открыть часы**

![other](../img/commands/other/19_1.png)
![other](../img/commands/other/19_2.png)
![other](../img/commands/other/19_3.png)
![other](../img/commands/other/19_4.png)

Важно заметить что \* показывает открытую в данный момент вкладку

**Посмотреть список запущенных _tmux’ов._**

``` 
~$ tmux list-session
```

![other](../img/commands/other/20.png)
  
## Команда nohup

**nohup** — утилита, которая позволяет запустить команду, защищенную от зависания с выходом на non-tty (игнорирует потерю сигналов связи SIGHUP).

**Скачать очень объемный файл в фоновом режиме**

``` 
~$ nohup wget http://example.com/some-large-package.iso &
``` 

![other](../img/commands/other/21.png)


**Убедиться в том, что процесс все еще выполняется**

``` 
~$ ps aux | grep wget
```

![other](../img/commands/other/22.png)


Можно использовать **nohup**, утилита по умолчанию пишет вывод в файл, процесс не прервется при отсоединении от терминала (в случае если пользователь выполнит **log out** и выйдет из системы)

**Узнать версию программы**

```
~$ nohup --version
```  

![other](../img/commands/other/23.png)


Контроля над процессом, тем не менее, нет. Можно только дождаться его завершения или вручную прекратить его выполнение.

**Остановить процесс принудительно.**

```
~$ killall wget
```

![other](../img/commands/other/24.png)


## Команда perf

**Perf** анализирует работу системы и приложений, формируя детальные отчеты о нагрузке,   обусловленной различными вызовами, процессами, операциями ввода-вывода, сетевыми событиями и т.п.

### Ключи perf
---

<ins>**Ключ stat**</ins>

**Собрать стандартную статистику системного события, включая сведения об инструкциях и временных циклах**

```
~# perf stat command
```

![other](../img/commands/other/25.png)

  
У perf **stat** есть несколько своих подключей, но мы их не использовали. В нашем примере рассматривалась статистика команды **date**.

<ins>**Ключ top**</ins>
 
**Осуществить сбор статистики в реальном времени аналогично top.**

```
~# perf top
```

![other](../img/commands/other/26.png)

<ins>**Ключ list**</ins>

**Вывести список доступных событий.**

```
~$ perf list
```

![other](../img/commands/other/27.png)


<ins>**Ключ record**</ins>

**Собрать данные и сохранить их в файл, анализ которого может быть выполнен с помощью perf report**

```
~# perf record –F 99 command
```

![other](../img/commands/other/28.png)


У **perf** record есть несколько ключей и параметров, в которые мы не будем углубляться. В нашем пример **«–F»** обозначает, функции центрального процессора, а число **99** – количество Герц.

<ins>**Ключ report**</ins>

**Сформировать отчет из полученных из файла сведений о производительности**

```
~# perf report
```

![other](../img/commands/other/29.png)

Данные, которые эта команда берет для отчета, находятся в файле **«perf.data»**, поэтому, если в него ничего не помещено командой **«perf record»**, то машина выведет ошибку, сообщающую, что **«perf.data»** пуст.

## Команда chroot

**Chroot**  операция изменения корневого каталога диска для запущенного процесса и его дочерних процессов. Программа, запущенная в таком окружении не может получить доступ к файлам вне нового корневого каталога. Это измененное окружение называется **chroot jail**.

**Chroot-окружение Linux** не стоит использовать в качестве средства защиты. В целом, окружения **chroot** могут быть использованы как дополнительный уровень безопасности, но они не достаточно изолированы, чтобы выступать в качестве полноценной защиты системы.

Изменение корневого каталога обычно производится для выполнения действий по обслуживанию систем, загрузка и/или вход в которых стали невозможны. В таком режиме, например, могут быть выполнены:

* Переустановка загрузчика.
* Пересборка образа initramfs.
* Обновление или откат пакетов.
* Сброс пароля root.


**Изменить корневой раздел**

``` 
~# chroot /proc/1/cwd/
```

![other](../img/commands/other/30.png)

