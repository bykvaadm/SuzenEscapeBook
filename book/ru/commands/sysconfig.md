Useradd
Useradd- Команда useradd используется в дистрибутиве Debian для упрощения создания учетных записей пользователей, а также автоматической проверки их соотвествия политике упомянутого дистрибутива. Она реализована в виде обертки для таких утилит, как useradd, passwd и chfn и использует дополнительный файл конфигурации /etc/adduser.conf для хранения параметров, относящихся к политике дистрибутива Debian.
Команда, введенная без ключей создает нового пользователя без дополнительных действий.
Команда
Ключи 
Описание ключей







Useradd
-b
Этот ключ необходим для того, чтобы у пользователя был задан базовый каталог для домашнего

-d
Создает полный путь к домашнему каталогу

-e
Ключ нужен, чтобы установить дату устаревания

-m/M
Указатель на то, что нужно(не нужно) создать домашний каталог

-p
Создание пользователя с паролем

-c
Создание пользователя с комментарием

-u
Присвоение пользователю UID

-h
Доступные опции

Примеры:
    1. 
Задача:
        Создать пользователя Girls без дополнительных опций
Команда:
useradd Girls


getent passwd
Проверка:


С помощью данной команды мы проверяем, создался ли пользователь Girls.
  
Результат:
              
    2. 
Задача:
Создать пользователя boys с заданным базовым каталогом, для домашнего.
Команда:
useradd boys –b /var/home

getent passwd
Проверка:


С помощью данной команды мы проверяем, создался ли пользователь boys.

Результат:


    3. 
Задача:
Добавить нового пользователя people с созданием полного пути к домашнему каталогу.
Команда:
useradd people –d /home/kursach

Проверка:
getent passwd
C помощью данной команды проверяем, создался ли пользователь people с указанным путем к домашнему каталогу.

Результат:

    4. 
Задача:
Создать пользователя cars с датой устаревания.
Команда:
useradd cars –e 2018-08-17

Проверка:
chage –l cars
Данная команда показывает сведения о сроке действия учетной записи.

Результат:

    5. 
Задача:
Добавить пользователя dogs и указать, что нужно создать домашний каталог.
Команда:
useradd dogs -m


Проверка:
getent passwd
По умолчанию команда "useradd" создает домашнюю директорию пользователя в /home и называет ее именем пользователя. Поэтому, например, для приведенного выше примера, мы увидим домашнюю директорию созданного нами пользователя "dogs" в "/home/dogs".

Результат:

    6. 
Задача:
Добавить пользователя computer и указать, что не нужно создавать домашний каталог.
Команда:
useradd comp –M computer

Проверка:
ls –l /home/computer
В некоторых ситуациях мы не хотим, по соображениям безопасности, давать пользователям домашние директории. В таком случае, когда пользователь авторизуется в системе сразу после ее запуска, его домашней директорией будет root. Если такой пользователь использует команду su, то он авторизуется в домашней директории предыдущего пользователя.

Результат:

    7. 
Задача:
Создать пользователя с паролем.
Команда:
useradd chicken –p 1234

Проверка:
cat /etc/passwd
С помощью этой команды также можно проверить, создался ли пользователь в системе.

Результат:

Проверка:
su chicken
С помощью этой команды заходим от пользователя chicken

Результат:

    8. 
Задача:
   Создать пользователя Polya с комментарием.
Команда:
useradd Polya –c “Polina”


Проверка:
cat /etc/passwd
С помощью этой команды проверяем, создался ли пользователь с комментарием

Результат:

    9. 
В Linux каждый пользователь имеет свой собственный UID (Unique Identification Number). По умолчанию при создании нового пользователя ему присваивается userid 500, 501, 502 и т.д. Но можно присвоить свой.
Задача:
Создать пользователя Yulia с уникальным UID номером.
Команда:
useradd Yulia –u 8888

Проверка:
cat /etc/passwd
С помощью этой команды проверяем, создался ли пользователь с UID.

Результат:

    10. 
Задача:
 Проверить все возможные опции с помощью ключа –h.
Команда:
useradd -h

Результат:




§2. Groupadd
Groupadd- команда groupadd создает новую учетную запись группы, используя значения, указанные в командной строке, плюс значения по умолчанию из системы. Новая группа будет добавлена в системные файлы. 
Команда, введенная без аргументов, создает новую группу в Linux.

Команда

Ключ

Описание ключей
groupadd
-g
С помощью ключа можно присвоить группе GID

-K
Создание группы пользователей с идентификатором из диапазона

Примеры:
1.
Задача:
Создать группу students без дополнительных опций.
Команда:
groupadd students


Проверка:
cat /etc/group
С помощью данной команды проверяем, создалась ли группа.

Результат:



2.
Задача:
Создать группу bbso с уникальным GID.
Команда:
groupadd –g 4444 bbso

Проверка:
cat /etc/group
С помощью данной команды проверяем, создалась ли группа с индивидуальным GID (Group Identification Number).

Результат:

3.
Задача:
Создать группу flowers с идентификатором из заданного диапазона.
Команда:
groupadd  –K GID_MIN=2031 –K GID_MAX=2052 flowers

Проверка:
cat /etc/group
С помощью команды проверяем, действительно ли группе flowers присвоился идентификатор от 2031 до 2052. Первый свободный.

Результат:























§3.Usermod
Usermod(groupmod)-для изменения учетной записи пользователя (account) используется команда usermod. Изменять можно любые атрибуты, но имя пользователя и код UID изменять нужно лишь в случае крайней необходимости, поскольку такое изменение может иметь общесистемные последствия.
Команда usermod, введенная без ключей, изменяет учётную запись пользователя. 
Команда
Ключи
Описание ключей
usermod
-l
Смена имени пользователя

-a -G
Добавление пользователя в группу

-n
Смена названия группы

-p -l
Смена пароля при каждом входе

Примеры:
1.
Задача:
Сменить имя пользователя girls на sweet.
Команда:
usermod –l sweet girls


Проверка:
vi /etc/group
Проверяем, действительно ли поменялось имя.

Результат:

         2.
Задача:
Добавить пользователя Yulia в группу bbso.
Команда:
usermod –a –G bbso Yulia

Проверка:
cat /etc/group

Проверяем, действительно ли теперь Yulia находится в группе bbso.

Результат:

3.
Задача:
Сменить название группы flowers.
Команда:
groupmod –n roses flowers

Проверка:
cat /etc/group

Изначальная группа:

Результат:

4.
Задача:
Заставить пользователя менять пароль при каждом входе в систему.
Команда:
usermod Polya –p -l

Проверка и Результат:
Su Polya
passwd

Чтобы проверить, что при каждом входе компьютер будет запрашивать пароль, нужно войти от пользователя Polya и ввести команду passwd.







§4.Sudo (su)
Sudo(su)- предположим, что нужно выполнить нестандартную задачу, где графические инструменты нам не помогут. К тому же командная строка является очень гибким инструментом, здесь можно увидеть вывод команд и понять, что происходит не так как нужно. А самое главное, команды в терминале являются стандартными для всех дистрибутивов Linux.
Итак, существует два основных способа получить права суперпользователя (Root) это — sudo или su.
Без дополнительных опций команды sudo и su дают право работать от суперпользователя.
Команда 
Ключ
Описание ключей
Sudo
-l
Cписок прав пользователя

-s
Оболочка SHELL

-h
Опции
Su
-l
Переход в домашнюю директорию

-h
Опции

Примеры:
1.
Задача:
Зайти в систему под именем суперпользователя.
Команда:
sudo

Результат:

2.
Задача:
Показать список прав пользователя или проверить заданную команду.
Команда:
sudo -l

Результат:

3.
Задача:
Запустить оболочку,  указанную в переменной окружения SHELL.
Команда:
sudo -s

Результат:
exit-выход из сессии




4.
Задача:
Посмотреть опции sudo.
Команда:
sudo -h

Результат:

5.
Задача:
Зайти под другой учетной записью.
Команда:
su boys

Проверка и Результат:
whoami
С помощью данной команды узнаем под каким пользователем мы работаем

6.
Задача:
Перейти в домашнюю директорию.
Команда:
su -l
Результат:

Ничего не поменялось, т.к. пользователь уже находился в домашней директории.
7.
Задача:
Посмотреть опции su.
Команда:
su -h

Результат:

